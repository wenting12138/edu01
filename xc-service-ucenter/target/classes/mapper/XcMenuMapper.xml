<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xc.ucenter.dao.XcMenuMapper">

<!--    // 根据用户id查询用户权限-->
<!--    List<XcMenu> selectPermissionByUserId(String userId);-->
    <select id="selectPermissionByUserId" resultType="com.xc.model.ucenter.XcMenu" parameterType="java.lang.String">
        SELECT id,code,p_id pId,menu_name menuName,url,is_menu isMenu,level,sort,status,icon,create_time createTime,update_time updateTime
        FROM xc_menu
        WHERE id IN (
		    SELECT menu_id
		    FROM xc_permission
		    WHERE role_id IN (
			    SELECT role_id
                FROM xc_user_role
                WHERE user_id = #{userId}
			)
	    )
    </select>
</mapper>
